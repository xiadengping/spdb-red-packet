{"version":3,"sources":["../../src/util/global.js"],"names":["protoAugment","convertEmoji","formatNum","getClientMsgId","getDeviceID","debug","isStandardBrowserEnv","window","document","createElement","isFunction","Object","prototype","toString","call","val","obj","proto","__proto__","s","replace","a","b","length","slice","Error","String","fromCodePoint","apply","err","num","isNaN","n","Array","join","assert","equal","actual","expected","message","e","notEqual","ok","Date","now","Math","random","toFixed","substring"],"mappings":"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","file":"global.js","sourcesContent":["'use strict'\nimport Assert from 'assert'\nimport _debug from 'debug'\nconst debug = _debug('util')\n\nexport const isStandardBrowserEnv = (\n  typeof window !== 'undefined' &&\n  typeof document !== 'undefined' &&\n  typeof document.createElement === 'function'\n)\n\nexport const isFunction = val => Object.prototype.toString.call(val) === '[object Function]'\n\nexport function protoAugment(obj, proto) {\n  /* eslint-disable no-proto */\n  obj.__proto__ = proto\n    /* eslint-enable no-proto */\n}\n\nexport function convertEmoji(s) {\n  return s ? s.replace(/<span.*?class=\"emoji emoji(.*?)\"><\\/span>/g, (a, b) => {\n    try {\n      let s = null\n      if (b.length === 4 || b.length === 5) {\n        s = ['0x' + b]\n      } else if (b.length === 8) {\n        s = ['0x' + b.slice(0, 4), '0x' + b.slice(4, 8)]\n      } else if (b.length === 10) {\n        s = ['0x' + b.slice(0, 5), '0x' + b.slice(5, 10)]\n      } else {\n        throw new Error('unknown emoji characters')\n      }\n      return String.fromCodePoint.apply(null, s)\n    } catch (err) {\n      debug(b, err)\n      return '*'\n    }\n  }) : ''\n}\n\nexport function formatNum(num, length) {\n  num = (isNaN(num) ? 0 : num).toString()\n  let n = length - num.length\n\n  return n > 0 ? [new Array(n + 1).join('0'), num].join('') : num\n}\n\nexport const assert = {\n  equal(actual, expected, message) {\n    try {\n      Assert.equal(actual, expected)\n    } catch (e) {\n      debug(e)\n      throw message\n    }\n  },\n  notEqual(actual, expected, message) {\n    try {\n      Assert.notEqual(actual, expected)\n    } catch (e) {\n      debug(e)\n      throw message\n    }\n  },\n  ok(actual, message) {\n    try {\n      Assert.ok(actual)\n    } catch (e) {\n      debug(e)\n      throw message\n    }\n  }\n}\n\nexport function getClientMsgId() {\n  return (Date.now() + Math.random().toFixed(3)).replace(\".\", \"\")\n}\n\nexport function getDeviceID() {\n  return \"e\" + (\"\" + Math.random().toFixed(15)).substring(2, 17)\n}\n"]}